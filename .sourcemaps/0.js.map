{"version":3,"sources":["../../src/pages/woo-list/woo-list.module.ts","../../src/pages/woo-list/woo-list.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { WooListPage } from './woo-list';\n\n@NgModule({\n  declarations: [\n    WooListPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(WooListPage),\n  ],\n})\nexport class WooListPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/woo-list/woo-list.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, LoadingController, ToastController, ModalController, Events } from 'ionic-angular';\nimport { WooProvider } from '../../providers/woo/woo';\n\n@IonicPage()\n@Component({\n  selector: 'page-woo-list',\n  templateUrl: 'woo-list.html',\n})\nexport class WooListPage {\n\n\titems: any;\n\tpage: number = 1;\n\troute: string;\n\tcartModal: any;\n\tcart_count: any;\n\n\tconstructor(\n\t\tpublic navCtrl: NavController, \n\t\tpublic navParams: NavParams,\n\t\tpublic wooProvider: WooProvider,\n\t\tpublic loadingCtrl: LoadingController,\n\t\tpublic toastCtrl: ToastController,\n\t\tpublic modalCtrl: ModalController,\n\t\tpublic events: Events\n\t\t) {\n\n\t\tthis.route = 'wp-json/wc/v2/products'\n\n\t\tevents.subscribe('add_to_cart', data => {\n\t      this.cart_count++\n\t    });\n\n\t    events.subscribe('clear_cart', data => {\n\t      this.cart_count = 0\n\t    });\n\t}\n\n\tionViewDidLoad() {\n\t\tthis.loadProducts()\n\n\t\tthis.wooProvider.getCartContents().then( cart => {\n\t\t\tthis.cart_count = ( cart ? (<any>cart).length : '' )\n\t\t})\n\t\t\n\t}\n\n\tloadProducts() {\n\n\t\tlet loading = this.loadingCtrl.create({\n\t\t    showBackdrop: false,\n\t\t    //dismissOnPageChange: true\n\t\t});\n\n\t\tloading.present(loading);\n\n\t\tthis.page = 1;\n\n\t\t// any menu imported from WP has to use same component. Other pages can be added manually with different components\n\t\tthis.wooProvider.get( this.route, this.page ).then(items => {\n\n\t\t  console.log(items)\n\n\t\t  // Loads posts from WordPress API\n\t\t  this.items = items;\n\n\t\t  // load more right away\n\t\t  this.loadMore(null);\n\t\t  loading.dismiss();\n\t\t}).catch((err) => {\n\n\t\t  loading.dismiss();\n\t\t  console.error('Error getting posts', err);\n\n\t\t});\n\n\t\t// make sure spinner never gets stuck on\n\t\tsetTimeout(() => {\n\t\t    loading.dismiss();\n\t\t}, 8000);\n\n\t}\n\n\titemTapped(event, item) {\n\n\t\tlet opt = {};\n\n\t\tthis.navCtrl.push('WooDetailPage', {\n\t\t  item: item\n\t\t}, opt);\n\t}\n\n\tdoRefresh(refresh) {\n\t\tthis.loadProducts();\n\t\t// refresh.complete should happen when posts are loaded, not timeout\n\t\tsetTimeout( ()=> refresh.complete(), 500);\n\t}\n\n\tloadMore(infiniteScroll) {\n\n\t\tthis.page++;\n\n\t\tthis.wooProvider.get( this.route, this.page ).then(items => {\n\t\t  // Loads posts from WordPress API\n\t\t  let length = items[\"length\"];\n\n\t\t  if( length === 0 ) {\n\t\t    if(infiniteScroll)\n\t\t      infiniteScroll.complete();\n\t\t    return;\n\t\t  }\n\n\t\t  for (var i = 0; i < length; ++i) {\n\t\t    this.items.push( items[i] );\n\t\t  }\n\n\t\t  if(infiniteScroll)\n\t\t    infiniteScroll.complete();\n\n\t\t}).catch( e => {\n\t\t  // promise was rejected, usually a 404 or error response from API\n\t\t  if(infiniteScroll)\n\t\t    infiniteScroll.complete();\n\n\t\t  console.warn(e)\n\n\t\t});\n\n\t}\n\n\tpresentToast(msg) {\n\n\t\tlet toast = this.toastCtrl.create({\n\t\t  message: msg,\n\t\t  duration: 3000,\n\t\t  position: 'bottom',\n\t\t  cssClass: 'normal-toast'\n\t\t});\n\n\t\ttoast.present();\n\n\t}\n\n\tshowCart() {\n\n\t    this.cartModal = this.modalCtrl.create( 'CartPage' );\n\t    \n\t    this.cartModal.present();\n\n\t}\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/woo-list/woo-list.ts"],"sourceRoot":""}