{"version":3,"sources":["../../src/pages/woo-detail/woo-detail.module.ts","../../src/pages/woo-detail/woo-detail.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { WooDetailPage } from './woo-detail';\n\n@NgModule({\n  declarations: [\n    WooDetailPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(WooDetailPage),\n  ],\n})\nexport class WooDetailPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/woo-detail/woo-detail.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController, ModalController, Events } from 'ionic-angular';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { Storage } from '@ionic/storage';\nimport { WooProvider } from '../../providers/woo/woo';\n\n@IonicPage()\n@Component({\n  selector: 'page-woo-detail',\n  templateUrl: 'woo-detail.html',\n})\nexport class WooDetailPage {\n\n\tselectedItem: any;\n\tdescription: any;\n\tcartModal: any;\n\tvariations: any;\n\tcart_count: number;\n\titemAdded: boolean = false;\n\n\tconstructor(\n\t\tpublic navCtrl: NavController, \n\t\tpublic navParams: NavParams,\n\t\tpublic sanitizer: DomSanitizer,\n\t\tpublic storage: Storage,\n\t\tpublic toastCtrl: ToastController,\n\t\tpublic modalCtrl: ModalController,\n\t\tpublic wooProvider: WooProvider,\n\t\tpublic events: Events\n\t\t) {\n\n\t\tthis.loadProduct()\n\n\t\tthis.wooProvider.getCartContents().then( cart => {\n\t\t\tthis.cart_count = ( cart ? (<any>cart).length : '' )\n\t\t})\n\n\t\tevents.subscribe('clear_cart', data => {\n\t      this.cart_count = 0\n\t    });\n\n\t}\n\n\tloadProduct() {\n\n\t\tthis.selectedItem = this.navParams.get('item');\n\n\t\tif( this.selectedItem.description ) {\n\t\t  this.description = this.sanitizer.bypassSecurityTrustHtml( this.selectedItem.description );\n\t\t} else {\n\t\t\tthis.description = '';\n\t\t}\n\n\t\tthis.getVariations()\n\n\t}\n\n\taddToCart(form) {\n\n\t\tlet item = form.value\n\n\t\titem.name = this.selectedItem.name\n\t\titem.product_id = this.selectedItem.id\n\t\titem.price = this.selectedItem.price\n\t\titem.quantity = ( item.quantity ? item.quantity : 1 )\n\n\t\tthis.storage.get( 'cart' ).then( data => {\n\n\t\t\tif( data ) {\n\n\t\t\t\t// if item is already in cart, just bump quantity\n\t\t\t\tfor( let product of data ) {\n\t\t\t\t\tif( product.product_id === item.product_id ) {\n\t\t\t\t\t\tproduct.quantity = parseInt( product.quantity ) + parseInt( item.quantity )\n\t\t\t\t\t\tthis.productAddSuccess( data, item )\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdata.push(item)\n\t\t\t} else {\n\t\t\t\tdata = [item]\n\t\t\t}\n\n\t\t\tthis.cart_count++\n\t\t\tthis.events.publish( 'add_to_cart', item )\n\n\t\t\tthis.productAddSuccess( data, item )\n\n\t\t})\n\n\t\t// flash cart icon\n\t\tthis.itemAdded = true\n\t\tsetTimeout( () => {\n\t\t\tthis.itemAdded = false\n\t\t}, 1000 );\n\n\t}\n\n\tproductAddSuccess( data, item ) {\n\n\t\tconsole.log('success', data)\n\n\t\tthis.storage.set( 'cart', data )\n\n\t\tthis.presentToast( item.name + ' added to cart!')\n\n\t}\n\n\tgetVariations() {\n\n\t\tthis.wooProvider.get( 'wp-json/wc/v2/products/' + this.selectedItem.id + '/variations', 'nopaging' ).then(variations => {\n\t\t\tthis.variations = variations\n\t\t})\n\n\t}\n\n\tpresentToast(msg) {\n\n\t\tlet toast = this.toastCtrl.create({\n\t\t  message: msg,\n\t\t  duration: 3000,\n\t\t  position: 'bottom',\n\t\t  cssClass: 'normal-toast'\n\t\t});\n\n\t\ttoast.present();\n\n\t}\n\n\tshowCart() {\n\n\t    this.cartModal = this.modalCtrl.create( 'CartPage' );\n\t    \n\t    this.cartModal.present();\n\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/woo-detail/woo-detail.ts"],"sourceRoot":""}