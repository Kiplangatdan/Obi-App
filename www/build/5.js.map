{"version":3,"sources":["../../src/pages/login-modal/login-modal.module.ts","../../src/pages/login-modal/login-modal.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginModalPage } from './login-modal';\n\n@NgModule({\n  declarations: [\n    LoginModalPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginModalPage),\n  ],\n})\nexport class LoginModalPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login-modal/login-modal.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController, LoadingController, ViewController, Events } from 'ionic-angular';\nimport { LoginProvider } from '../../providers/login/login';\nimport { Storage } from '@ionic/storage';\n\n/**\n * Generated class for the LoginModalPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-login-modal',\n  templateUrl: 'login-modal.html',\n})\nexport class LoginModalPage {\n\n\tlogin:any = {}\n\tspinner: any;\n\tloggedin: boolean = false\n\n\tconstructor(\n\t\tpublic navCtrl: NavController, \n\t\tpublic navParams: NavParams,\n\t\tpublic toastCtrl: ToastController,\n\t\tprivate loginProvider: LoginProvider,\n\t\tpublic loadingCtrl: LoadingController,\n\t\tpublic viewCtrl: ViewController,\n\t\tpublic storage: Storage,\n\t\tpublic events: Events\n\t\t) {\n\t}\n\n\tionViewDidLoad() {\n\t\tthis.start()\n\t}\n\n\tstart() {\n\n\t\tthis.storage.get('user_login').then( data => {\n\t\t  if( data ) {\n\t\t    // do checks here\n\t\t    this.loggedin = true\n\t\t  } else {\n\t\t    this.loggedin = false\n\t\t  }\n\t\t})\n\n\t}\n\n\tdoLogin() {\n\n\t\tif( !this.login )\n\t\t\tthis.presentToast( 'Please enter a valid login.' );\n\n\t\tthis.showSpinner()\n\n\t\tthis.loginProvider.login( this.login ).then( response => {\n\n\t\t\tif( !response || (<any>response).success === false ) {\n\t\t\t\tthis.loginErr( response )\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet login_data = (<any>response).data;\n\n\t\t\tconsole.log( login_data )\n\n\t\t\tthis.presentToast( login_data.message );\n\t\t\tthis.events.publish('user:login', login_data )\n\t\t\tthis.storage.set( 'user_login', login_data )\n\t\t\tthis.dismiss()\n\n\t\t\tthis.hideSpinner()\n\n\t\t}, (err) => {\n\n\t\t\tthis.hideSpinner()\n\t\t\tthis.loginErr(err)\n\n\t\t}).catch( e => {\n\t\t\tconsole.warn(e)\n\t\t\tthis.hideSpinner()\n\t\t\tthis.presentToast( 'There was a problem connecting to the server.' );\n\t\t})\n\n\t\t// make sure spinner disappears even if there's a problem\n\t\tsetTimeout( () => {\n\t\t\tthis.hideSpinner();\n\t\t}, 5000 );\n\t}\n\n\tdoLogout() {\n\n\t\tthis.showSpinner()\n\n\t\tthis.loginProvider.login( {}, true ).then( response => {\n\n\t\t\tif( !response || (<any>response).success === false ) {\n\t\t\t\tthis.loginErr( response )\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet login_data = (<any>response).data;\n\n\t\t\tconsole.log( login_data )\n\n\t\t\tthis.presentToast( login_data.message )\n\t\t\tthis.events.publish('user:login', login_data )\n\t\t\tthis.storage.remove( 'user_login' )\n\t\t\tthis.dismiss()\n\n\t\t\tthis.hideSpinner()\n\n\t\t}, (err) => {\n\n\t\t\tthis.hideSpinner()\n\t\t\tthis.loginErr(err)\n\n\t\t}).catch( e => {\n\t\t\tconsole.warn(e)\n\t\t\tthis.hideSpinner()\n\t\t\tthis.presentToast( 'There was a problem connecting to the server.' );\n\t\t})\n\n\t\t// make sure spinner disappears even if there's a problem\n\t\tsetTimeout( () => {\n\t\t\tthis.hideSpinner();\n\t\t}, 5000 );\n\n\t}\n\n\tloginErr( err ) {\n\n\t\tconsole.log(err)\n\n\t\tthis.hideSpinner()\n\n\t\tthis.presentToast( err.data.message );\n\n\t}\n\n\tdismiss() {\n\t\tthis.viewCtrl.dismiss();\n\t}\n\n\tshowSpinner() {\n\t\tthis.spinner = this.loadingCtrl.create();\n\n\t\tthis.spinner.present();\n\t}\n\n\thideSpinner() {\n\t\tthis.spinner.dismiss();\n\t}\n\n\tpresentToast(msg) {\n\n\t\tconsole.log(msg)\n\n\t    let toast = this.toastCtrl.create({\n\t      message: msg,\n\t      duration: 5000,\n\t      position: 'bottom'\n\t    });\n\n\t    toast.present();\n\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login-modal/login-modal.ts"],"sourceRoot":""}